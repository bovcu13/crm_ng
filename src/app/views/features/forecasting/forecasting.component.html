<div class="container">
  <div class="row mb-5">
    <div class="mt-3 mb-3">
      <p-card>
        <span>
          <h3>預測</h3>
          <div class="d-flex "></div>
        </span>
        <div class="d-flex justify-content-between se mb-2">
          <div class="p-2 se">
            <label>預測 > 機會收入</label>
            <br>
            <p-dropdown [editable]="true" [options]="users" placeholder="選擇業務" [(ngModel)]="selecteduser"></p-dropdown>
          </div>
          <div class="p-2 se">
            <label>設定預測範圍</label>
            <br>
            {{selectedforecasting_start}} - {{selectedforecasting_end}}
            <input type="text" (click)="set_forecasting_range()" placeholder="選擇預測範圍" pInputText />
          </div>
        </div>
      </p-card>
    </div>
    <p-card>
      <span>
        <div class="d-flex ">
          顯示下列項目的機會 : {{selecteduser}}  • {{selectedforecasting_start}}•所有預測種類
        </div>
      </span>
      <p-table [value]="forecasting" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header">
          <tr>
            <th>機會名稱</th>
            <th>帳戶名稱</th>
            <th>金額</th>
            <th>結束日期</th>
            <th>階段</th>
            <th>可能性 (%)</th>
            <th>預測種類</th>
            <th>擁有者全名</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-forecasting>
          <tr>
            <td>{{ forecasting.opportunity }}</td>
            <td>{{ forecasting.account_name }}</td>
            <td>{{ forecasting.amount }}</td>
            <td>{{ forecasting.created_end }}</td>
            <td>{{ forecasting.section }}</td>
            <td>{{ forecasting.possibility }}</td>
            <td>{{ forecasting.type }}</td>
            <td>{{ forecasting.owner }}</td>
            <td></td>
          </tr>
        </ng-template>
      </p-table>
    </p-card>
  </div>
</div>

<p-dialog header="設定預測範圍" [(visible)]="visible" [style]="{ width: '50vw' }">
  <div class="container row">
    <div class="開始週期">
      <label>開始週期</label>
      <p-dropdown [editable]="true" [options]="forecasting_range" [(ngModel)]="selectedforecasting_start"></p-dropdown>
      <label>過去 15 個月</label>
    </div>
    <div class="col-12 mt-3">
      <label>結束週期</label>
      <p-dropdown [editable]="true" [options]="forecasting_range" [(ngModel)]="selectedforecasting_end"></p-dropdown>
      <label>已顯示 ? 個月</label>
    </div>
    <div class="col-12 d-flex justify-content-end mt-4">
      <p-button label="儲存" (click)="visible = false" styleClass="p-button-outlined p-button-info"></p-button>
      <p-button label="取消" (click)="visible = false" styleClass="p-button-secondary ms-1"></p-button>
    </div>
  </div>
</p-dialog>
